(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{70:function(e,t,n){},72:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),i=n.n(c),o=(n(70),n(12)),l=n.n(o),s=n(20),u=n(15),d=(n(72),n(139)),p=n(128),j=n(131),b=n(134),f=n(133),h=n(135),x=n(39),m=n(136),O=n(137),g=n(3),v=Object(p.a)((function(e){return{root:{width:"60vw"},inline:{display:"inline"}}}));function y(e){var t=v();return Object(g.jsx)(j.a,{className:t.root,children:e.receipes.map((function(t,n){return Object(g.jsxs)("div",{children:[0!=n&&Object(g.jsx)(f.a,{variant:"middle"}),Object(g.jsxs)(b.a,{alignItems:"flex-start",style:{cursor:"pointer"},onClick:function(){return e.displayReceipe(t._id)},children:[Object(g.jsx)(h.a,{primary:Object(g.jsx)(x.a,{variant:"h4",gutterBottom:!0,children:t.name}),secondary:t.ingredients.map((function(e){return e.name})).join(", ")}),Object(g.jsxs)(m.a,{children:[Object(g.jsx)(O.a,{style:{marginLeft:15},edge:"end",onClick:function(){return e.displayReceipe(t._id)},children:"\ud83d\udc41"}),Object(g.jsx)(O.a,{style:{marginLeft:15},edge:"end",onClick:function(){return e.editReceipe(t._id)},children:"\u270d\ufe0f"}),Object(g.jsx)(O.a,{style:{marginLeft:15},edge:"end",onClick:function(){return e.deleteReceipe(t._id)},children:"\u274c"})]})]})]},t._id)}))})}var k=n(42),R=n(13),C=n(140),w=function(e){var t;return Object(g.jsx)(C.a,{style:Object(R.a)({marginVertical:15},e.style),label:e.label,value:e.value,placeholder:e.placeholder,fullWidth:null===(t=e.fullWidth)||void 0===t||t,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:e.onChange})},A=function(e){return Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(d.a,{size:"small",variant:"contained",color:"primary",onClick:e.addEmptyIngredient,children:"Ajouter un ingr\xe9dient"}),Object(g.jsx)("div",{})]})},S=function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(w,{label:"Nom ingr\xe9dient",placeholder:"Saumon frais",fullWidth:!1,value:e.data.name,onChange:e.onChangeName}),Object(g.jsx)(w,{label:"Quantit\xe9 ingr\xe9dient",placeholder:"250",fullWidth:!1,value:e.data.quantity,onChange:e.onChangeQuantity}),Object(g.jsx)(w,{label:"Unit\xe9 ingr\xe9dient",placeholder:"grammes",fullWidth:!1,value:e.data.unit,onChange:e.onChangeUnit}),Object(g.jsx)(O.a,{"aria-label":"delete",style:{marginTop:15,marginLeft:10},onClick:function(){return e.removeIngredientRow(e.index)},children:"\u274c"}),Object(g.jsx)("div",{})]})},T=function(e){return Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(d.a,{size:"small",variant:"contained",color:"primary",onClick:e.addEmptyStep,children:"Ajouter une \xe9tape"}),Object(g.jsx)("div",{})]})},I=function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(w,{label:"Description de l'\xe9tape",placeholder:"D\xe9coupez le saumon en d\xe9s",value:e.data.text,fullWidth:!1,style:{width:"calc(100% - 65px)"},onChange:e.onChangeText}),Object(g.jsx)(O.a,{"aria-label":"delete",style:{marginTop:15,marginLeft:10},onClick:function(){return e.removeStepRow(e.index)},children:"\u274c"}),Object(g.jsx)("div",{})]})},z=function(){return Math.round(1e6*Math.random())};function F(e){console.log("START",e.formReceipe);var t=Object(r.useState)(e.formReceipe?e.formReceipe.name:void 0),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(e.formReceipe?e.formReceipe.nbParts:void 0),o=Object(u.a)(i,2),l=o[0],s=o[1],p=Object(r.useState)(e.formReceipe?e.formReceipe.ingredients.map((function(e){return Object(R.a)(Object(R.a)({},e),{},{id:z()})})):[]),j=Object(u.a)(p,2),b=j[0],f=j[1],h=Object(r.useState)(e.formReceipe&&e.formReceipe.steps?e.formReceipe.steps.map((function(e){return{text:e,id:z()}})):[]),m=Object(u.a)(h,2),O=m[0],v=m[1],y=function(){return e.formReceipe&&null!=e.formReceipe._id},C=function(){var e={name:a,nbParts:l,ingredients:b.map((function(e){return{name:e.name,quantity:e.quantity,unit:e.unit}})),steps:O.map((function(e){return e.text}))};return console.log("RESULT",e),e};return Object(g.jsxs)("div",{style:{textAlign:"left"},children:[Object(g.jsx)(w,{label:"Nom de la recette",placeholder:"Tarte au ch\xe8vre et saumon",value:a,onChange:function(e){return c(e.target.value)}}),Object(g.jsx)(w,{label:"Nombre de parts",placeholder:"6",value:l,onChange:function(e){return s(e.target.value)}}),Object(g.jsx)(x.a,{variant:"h5",style:{textAlign:"left",marginTop:15},children:"Ingr\xe9dients :"}),b.map((function(e,t){return Object(g.jsx)(S,{index:t,data:e,onChangeName:function(t){return f(b.map((function(n){return n.id==e.id?Object(R.a)(Object(R.a)({},n),{},{name:t.target.value}):n})))},onChangeQuantity:function(t){return f(b.map((function(n){return n.id==e.id?Object(R.a)(Object(R.a)({},n),{},{quantity:t.target.value}):n})))},onChangeUnit:function(t){return f(b.map((function(n){return n.id==e.id?Object(R.a)(Object(R.a)({},n),{},{unit:t.target.value}):n})))},removeIngredientRow:function(t){return f(b.filter((function(t){return t.id!=e.id})))}},e.id)})),Object(g.jsx)(A,{addEmptyIngredient:function(){return f([].concat(Object(k.a)(b),[{id:z()}]))}}),Object(g.jsx)(x.a,{variant:"h5",style:{textAlign:"left",marginTop:15},children:"\xc9tapes de la recette :"}),O.map((function(e,t){return Object(g.jsx)(I,{index:t,data:e,removeStepRow:function(t){return v(O.filter((function(t){return t.id!=e.id})))},onChangeText:function(t){return v(O.map((function(n){return n.id==e.id?Object(R.a)(Object(R.a)({},n),{},{text:t.target.value}):n})))}},e.id)})),Object(g.jsx)(T,{addEmptyStep:function(){return v([].concat(Object(k.a)(O),[{id:z()}]))}}),Object(g.jsxs)("div",{style:{textAlign:"center"},children:[Object(g.jsxs)(d.a,{variant:"contained",color:"primary",style:{margin:"30px 5px"},size:"large",onClick:function(){return function(){var t=C();y()?e.updateReceipe(Object(R.a)(Object(R.a)({},t),{},{_id:e.formReceipe._id})):e.addReceipe(t)}()},children:[y()?"Modifier":"Ajouter"," la recette"]}),Object(g.jsx)(d.a,{variant:"contained",style:{margin:"30px 5px"},size:"large",onClick:e.cancelReceipe,children:"Annuler"})]})]})}function _(e){return Object(g.jsxs)("div",{style:{textAlign:"left"},children:[Object(g.jsx)(x.a,{variant:"h2",style:{textAlign:"center",marginTop:15},children:e.receipe.name}),Object(g.jsx)(x.a,{variant:"h5",style:{textAlign:"left",marginTop:45},children:"Ingr\xe9dients pour ".concat(e.receipe.nbParts," personnes :")}),Object(g.jsx)("ul",{children:e.receipe.ingredients.map((function(e){return Object(g.jsx)(a.a.Fragment,{children:Object(g.jsx)("li",{style:{marginBottom:25},children:"".concat(e.quantity," ").concat(e.unit?"".concat(e.unit," de"):""," ").concat(e.name)})})}))}),Object(g.jsx)(x.a,{variant:"h5",style:{textAlign:"left",marginTop:45},children:"\xc9tapes de la recette :"}),Object(g.jsx)("ul",{children:e.receipe.steps.map((function(e){return Object(g.jsx)(a.a.Fragment,{children:Object(g.jsx)("li",{style:{marginBottom:25},children:e})})}))}),Object(g.jsx)("div",{style:{textAlign:"center"},children:Object(g.jsx)(d.a,{variant:"contained",style:{margin:"30px 5px"},size:"large",onClick:e.cancelReceipe,children:"Retour"})})]})}var B=n(138),L=n(79);var N=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),i=Object(u.a)(c,2),o=i[0],p=i[1],j=Object(r.useState)(!0),b=Object(u.a)(j,2),f=b[0],h=b[1],m=Object(r.useState)({}),O=Object(u.a)(m,2),v=O[0],k=O[1],R=Object(r.useState)(!1),C=Object(u.a)(R,2),w=C[0],A=C[1],S=Object(r.useState)(void 0),T=Object(u.a)(S,2),I=T[0],z=T[1];Object(r.useEffect)((function(){P()}),[]);var N=function(e){z(e),a(!0)},P=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.get("http://localhost:5000/receipes");case 3:t=e.sent,p(t.data),h(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=15;break}return e.prev=1,e.next=4,L.post("http://localhost:5000/receipes",t,{headers:{"Content-Type":"application/json"}});case 4:return e.sent,e.next=7,P();case 7:a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:e.next=16;break;case 15:alert("Veuillez donner un nom \xe0 la recette pour pouvoir l'ajouter.");case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=19;break}if(null==t._id){e.next=16;break}return e.prev=2,e.next=5,L.put("http://localhost:5000/receipes/".concat(t._id),t,{headers:{"Content-Type":"application/json"}});case 5:return e.sent,e.next=8,P();case 8:a(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:e.next=17;break;case 16:alert("Impossible de modifier une recette sans id.");case 17:e.next=20;break;case 19:alert("Veuillez donner un nom \xe0 la recette pour pouvoir l'ajouter.");case 20:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=14;break}return e.prev=1,e.next=4,L.delete("http://localhost:5000/receipes/".concat(t));case 4:return e.sent,e.next=7,P();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:e.next=15;break;case 14:alert("deleteReceipeBackend doit recevoir un id");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=13;break}return e.prev=1,e.next=4,L.get("http://localhost:5000/receipes/".concat(t));case 4:n=e.sent,N(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:e.next=14;break;case 13:alert("fetchReceipeBackendAndDisplay doit recevoir un id");case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=14;break}return e.prev=1,e.next=4,L.get("http://localhost:5000/receipes/".concat(t));case 4:n=e.sent,k(n.data),A(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:e.next=15;break;case 14:alert("fetchReceipeBackendAndDisplay doit recevoir un id");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"App",style:{maxWidth:"60vw",margin:"0 auto",marginBottom:40},children:[Object(g.jsx)("div",{style:{position:"absolute",top:0,left:0},children:Object(g.jsx)(d.a,{size:"small",variant:"contained",onClick:Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.get("http://localhost:5000/status");case 3:200==(t=e.sent).status?!0===t.data.success?alert("Succ\xe8s : Connexion avec l'API OK."):alert('\xc9chec : le endpoint /status devrait r\xe9pondre {"success":true} mais a r\xe9pondu '+JSON.stringify(t.data)):alert("\xc9chec : le endpoint /status a r\xe9pondu avec un code retour "+t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("\xc9chec : la tentative de connexion au endpoint /status a g\xe9n\xe9r\xe9 l'erreur suivante :\n"+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),children:"Check API"})}),Object(g.jsx)("header",{style:{margin:30,textAlign:"center"},children:Object(g.jsx)(x.a,{variant:"h1",children:"Cook App"})}),f?Object(g.jsx)("div",{align:"center",children:Object(g.jsx)(x.a,{variant:"h5",children:"Chargement des recettes..."})}):w?Object(g.jsx)(B.a,{elevation:3,style:{padding:30},children:Object(g.jsx)(_,{receipe:v,cancelReceipe:function(){return A(!1)}})}):n?Object(g.jsx)(B.a,{elevation:3,style:{padding:30},children:Object(g.jsx)(F,{addReceipe:function(e){return E(e)},updateReceipe:function(e){return W(e)},cancelReceipe:function(){return a(!1)},formReceipe:I})}):Object(g.jsxs)("div",{align:"center",children:[Object(g.jsx)(d.a,{variant:"contained",color:"primary",style:{margin:30},size:"large",onClick:function(){return N()},children:"Ajouter une recette"}),o.length>0?Object(g.jsx)(B.a,{elevation:3,children:Object(g.jsx)(y,{receipes:o,editReceipe:function(e){return D(e)},displayReceipe:function(e){return M(e)},deleteReceipe:function(e){return q(e)}})}):Object(g.jsx)(x.a,{variant:"h5",children:"Aucune recette enregistr\xe9e."})]})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root")),P()}},[[98,1,2]]]);
//# sourceMappingURL=main.f9d6f9e4.chunk.js.map